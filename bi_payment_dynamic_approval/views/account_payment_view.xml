<odoo>

<record id="account_payment_view_inherit_view" model="ir.ui.view">
        <field name="name">account.payment.form</field>
        <field name="model">account.payment</field>
        <field name="inherit_id" ref="account.view_account_payment_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <field name="is_approval_reject_button" invisible="1"/>
                <field name="is_rejected" invisible="1"/>
                <field name="all_level_approved" invisible="1"/>
                <button string="Approve Payment" name="approve_btn" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('is_approval_reject_button', '!=', True), '|', ('is_rejected', '=', True), ('all_level_approved', '=', True)]}"/>
                <button string="Reject Payment" name="button_cancel" type="object" class="oe_highlight" attrs="{'invisible': ['|', ('is_approval_reject_button', '!=', True), '|', ('is_rejected', '=', True), ('all_level_approved', '=', True)]}" context="{'default_order_id': active_id}"/>
            </xpath>
            <xpath expr="//field[@name='partner_bank_id']" position="after">
            
                <field name="payment_access_id" attrs="{'readonly': [('state', 'not in', ['draft', 'sent'])]}" readonly="0" options="{'no_create': True, 'no_create_edit': True}"/>     
            </xpath>  
              <field name="state" position="attributes">
                <attribute name="statusbar_visible">draft,waiting,posted,cancel</attribute>
            </field>
             <xpath expr="//sheet" position="inside">
                <notebook>
                    <page name="approval_info" string="Approval Info">
                        <group>
                        <group string="Approval" name="other_info">
                            <field name="level_data" readonly="1"/>
                            <field name="current_approval_state" invisible="1"/>
                            <field name="approved_user_ids" invisible="1"/>
                            <field name="current_waiting_approval_line_id" invisible="1"/>
                            <field name="user_ids" widget="many2many_tags" readonly="1"/>
                            <field name="group_ids" string="Groups" widget="many2many_tags" readonly="1"/>
                        </group>

                         <group name="rejection" string="Rejection">
                            <field name="reject_date" readonly="1"/>
                            <field name="rejected_user_id" widget="many2one_avatar_user" readonly="1"/>
                            <field name="reject_reason" readonly="1"/>
                        </group>

                        <field name="approval_line_ids" readonly="1">
                            <tree editable="bottom" default_order="level">
                                <field name="level"/>`
                                <field name="approval_line_id" invisible="1"/>
                                <field name="user_ids"/>
                                <field name="group_ids"/>
                                <field name="status" widget="boolean_toggle"/>
                                <field name="approved_date"/>
                                <field name="approved_id" widget="many2one_avatar_user"/>
                            </tree>
                        </field>
                    </group>
                    </page>
                </notebook>
                
            </xpath>
        </field>
    </record>


   <record id="action_payment_my_approval" model="ir.actions.act_window">
        <field name="name">My Approval Payments</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.payment</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_my_quotation': 1, 'my_approval': True}</field>
        <field name="domain">['|', ('user_ids', 'in', uid), ('is_display', '=', True), ('state', '=', 'waiting')]</field>
    </record>

    <record id="action_menu_waiting_for_approval" model="ir.actions.act_window">
        <field name="name">Waiting Approval Payments</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">account.payment</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{'search_default_my_quotation': 1}</field>
        <field name="domain">[('state', '=', 'waiting')]</field>
    </record>

    <menuitem id="payment_menu_waiting_approval" name="Waiting For Approval" parent="account.menu_finance_receivables" action="action_menu_waiting_for_approval" sequence="19" />


    <menuitem id="payment_menu_my_approval" name="My Approval" parent="account.menu_finance_receivables" action="action_payment_my_approval" sequence="19" />

</odoo>
